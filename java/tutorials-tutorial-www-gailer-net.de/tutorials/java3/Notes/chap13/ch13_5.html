<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<meta name="copyright" content="2000,  Bradley Kjell" />
<meta name="author" content="Bradley Kjell kjell@ieee.org " />
<meta name="translation" content="Copyright 2003 - 2006 Deutsche &Uuml;bersetzung Heinrich Gailer heinrich@gailer-net.de" />
<meta name="robots" content="index,follow" />
<title>Gefahr bei dem Vergleich von Double-Werten</title>
<link rel="stylesheet" type="text/css" href="../CAIstyle.css" />
</head>

<body>
<!-- generated by CSSmaker.java, version of 10/12/2004-->
<!-- from source javaChap13.frames on Wed Dec 12 08:48:12 CET 2007 -->

<!-- ANSWER AREA -->

<div class="answer">
<h3>Eine gute Antwort w&auml;re:</h3>
<center>
<table BORDER bordercolor="blue" cellpadding="15" align="left" bgcolor="#ffffff" hspace="10">
<tr align="center"><td><code>12+4  &gt; 16</code> </td><td><code>5.2-1.2 &lt;= 2.0+2</code></td><td><code>2*3-4 == 1+1</code></td></tr>
<tr align="center"><td>false</td>
                 <td>true</td>
                 <td>true</tr>
</table>
</center>
<br clear="all" />


</div>

<!-- LESSON AREA -->
<div class="lesson">
<h1>Gefahr bei dem Vergleich von Double-Werten</h1>
<A NAME="floating point, comparing"></A>
<p>
Was glauben Sie ist das Ergebnis des Booleschen Ausdrucks:
</p>

<pre class="code">
4.0/3.0 == 1.0 + 1.0/3.0
</pre>

<p>
Vermutlich denken Sie, dass er <em>wahr</em> ist.
Vermutlich ist er es.
Aber nicht sicher.
Gleitpunkt-Arithmetik ist nicht exakt.
Sie sollten niemals einem exakten "Ist-Gleich" Vergleich bei Gleitpunktzahlen trauen.
Das Problem besteht darin, dass manche Zahlen eine unbegrenzte Anzahl von Bits
ben&ouml;tigen, um exakt dargestellt werden zu k&ouml;nnen.
F&uuml;r diese Zahlen ist selbst
ein 64-Bit <code>double</code> nicht exakt.
</p>

<p>
Sie sind mit dieser Situation was die Papier-und-Bleistift-Arithmetik betrifft vertraut.
Zum Beispiel, ist das folgende wahr?
</p>

<pre class="code">
1.0/3.0 == 0.3333333
</pre>

<p>
Es ist nicht wahr, da die Dezimalzahl auf der rechten Seite
nur eine Ann&auml;herung ist.
Bei mehr Dezimalstellen wird die Ann&auml;herung besser,
aber sie ist niemals gleich dem Bruch.
Das gleiche passiert bei Java (und allen anderen Programmiersprachen).
Zum Beispiel,
das folgende k&ouml;nnte <em>falsch</em> ergeben:
</p>

<pre class="code">
1.0/10.0 == 0.1
</pre>

<p>
Manchmal, wenn unzweifelhafte Genauigkeit gebraucht wird,
wird Ganzzahl-Arithmetik verwendet.
Das ist einer der Gr&uuml;nde, warum Java &uuml;ber 64-Bit <code>long</code> Ganzzahlen verf&uuml;gt.
</p>


</div>

<!-- QUESTION AREA -->
<div class="question">
<h3> FRAGE 5:</h3>
<a href="ch13_6.html">
<img src="../nextBut.gif" hspace="5" align="right" border="0"/></a>
<p>
Was ist die Ausgabe des folgenden:
</p>

<pre class="code">
import java.io.*;
class DezimalBruch
{
  public static void main (String[] args) throws IOException
  {
    float x = 1.0f;
    float y = 10.0f;

    if ( x/y == 0.1 )
      System.out.println("Kuchen kaufen!"  );
    else
      System.out.println("Kein Kuchen heute.");
  }
}
</pre>


</div>
<div>
<a title="Zurück zum Inhaltsverzeichnis gehen." href="../../java-toc.html#13">Inhaltsverzeichnis</a>
</div>

</body>
</html>
