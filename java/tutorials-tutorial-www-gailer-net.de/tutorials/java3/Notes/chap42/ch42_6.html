<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<meta name="copyright" content="2002,  Bradley Kjell" />
<meta name="author" content="Bradley Kjell kjell@ieee.org " />
<meta name="robots" content="index,follow" />
<title>Floating Point Loop Control</title>
<link rel="stylesheet" type="text/css" href="../CAIstyle.css" />
</head>

<body>
<!-- generated by CSSmaker.java, version of 01/14/2003-->
<!-- from source javaChap42.frames on Sun May 25 15:46:20 EDT 2003 -->

<!-- ANSWER AREA -->

<div class="answer">
<h3>A good answer might be:</h3>

<ol>
<li>Will this new program compile?
    <ul><li><span class="blue">Yes. The compiler will not complain about anything.</span></ul></li>
<li>Will it run?
    <ul><li><span class="blue">Yes. It will run without any error messages.</span></ul></li>
<li>Is it correct?
    <ul><li><span class="red">No.</span> There is an error which may be hard to find because
            the two loops are not self-contained.</ul></li>
</ol>


</div>

<!-- LESSON AREA -->
<div class="lesson">
<h1>Floating Point Loop Control</h1>
<A NAME="floating point, as loop control variable"></A>

<p>
For counting loops it is best to use an integer for
the loop control variable.
However,
it is legal to use a floating point control variable and to use fractional increments.
The following program prints a table that displays 
<code>x</code> and <code>ln(x)</code> for values of
<code>x</code> from 0.1 up to about 2.0:
</p>

<pre>
class LogTable
{
  public static void main ( String[] args )
  {
    System.out.println( "x" + "\t ln(x)" );

    for ( <font color="blue">double x</font> = 0.1; x &lt;= 2.0; x = x + <font color="blue">0.1</font> )
      System.out.println( x + "\t" + Math.log( x ) );
  } 
}
</pre>

<p>
It compiles correctly, and runs.
But its output is not pretty:
</p>

<pre>
x                        ln(x)
0.1                     -2.3025850929940455
0.2                     -1.6094379124341003
0.30000000000000004     -1.203972804325936
0.4                     -0.916290731874155
0.5                     -0.6931471805599453
0.6                     -0.5108256237659907
0.7                     -0.35667494393873245
0.7999999999999999      -0.22314355131420985
0.8999999999999999      -0.1053605156578264
0.9999999999999999      -1.1102230246251565E-16
1.0999999999999999      0.09531017980432474
1.2                     0.1823215567939546
1.3                     0.26236426446749106
1.4000000000000001      0.336472236621213
1.5000000000000002      0.40546510810816455
1.6000000000000003      0.47000362924573574
1.7000000000000004      0.5306282510621706
1.8000000000000005      0.5877866649021193
1.9000000000000006      0.641853886172395
</pre>

<p>
Remember (from a previous chapter) that floating point numbers are not
absolutely accurate.
In particular, 0.1 is always slightly wrong when represented
inside a computer, no matter how many bits are used.
The errors in <em>x</em> accumulate,
and <em>x</em> drifts away from the desired value.
</p>

<p>
Notice that the last <code>x</code> in the table is not 2.0 as
you would expect with accurate numbers.
</p>


</div>

<!-- QUESTION AREA -->
<div class="question">
<h3> QUESTION 6:</h3>
<a href="ch42_7.html">
<img src="../nextBut.gif" hspace="5" align="right" border="0"/></a>
<p>
Are integer numbers completely accurate?
</p>

</div>

</body>
</html>
