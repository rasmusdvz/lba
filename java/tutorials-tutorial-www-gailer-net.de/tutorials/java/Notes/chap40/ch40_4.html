<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd" >
<html>
<head>
<meta  http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="author" content="kjell at ieee dot org">
<meta name="copyright" content="2002">
<meta name="germantranslation" content="Dr. Matthias Riege dr.riege at gmx dot de">
<meta name="germancopyright" content="2010, Heinrich Gailer/Dr. Matthias Riege">
<meta name="robots" content="index,follow">
<title>Gefahr bei jeder Methode</title>
<link rel="stylesheet" type="text/css" href="../CAIstyle.css">
</head>

<body>
<!-- generated by CSSmaker.java, version 04/06/2010 on Tue Mar 27 15:22:00 CEST 2012 -->

<!-- ANSWER DIVISION -->

<div class="answer">
     <div class="topnavigation">
     <a href="ch40_3.html"><img src="../backIcon.gif" alt="zur vorherigen Seite"></a> &nbsp; 
     <a href="../../index.html#40"><img src="../homeIcon.gif" alt="zum Inhaltsverzeichnis"></a> &nbsp;
     <a href="ch40_5.html"><img src="../nextIcon.gif" alt="zur n&auml;chsten Seite"></a>
     </div>
<h3>Antwort:</h3>
<p>
Jede Methode, die Werte beliebigen Typs zur&uuml;ck gibt, kann in Boole'schen Ausdr&uuml;cken verwendet werden, also sind Seiteneffekte zu beachten.
</p>

</div>

<!-- LESSON DIVISION -->
<div class="lesson">
<h1>Gefahr bei jeder Methode</h1>
<p>
Zum Beispiel angenommen, dass eine Methode <code>berechneMaximum()</code> das Maximum einer Anzahl von Variablen berechnet, den Wert in <code>maximum</code> speichert und diesen Wert zur&uuml;ckgibt:
</p>

<pre class="code">
int summe;
int maximum; // bestimmt durch <em>berechneMaximum()</em>
. . .

if ( summe &lt; 100 &amp;&amp; berechneMaximum() &lt; 500 ) // maximum k&ouml;nnte nicht berechnet worden sein
{
  . . .
}
ergebnis = 2 * maximum ;
</pre>

<p>
Es gibt ein Problem hier. Die Methode, die auf <code>&amp;&amp;</code> folgt, bestimmt <code>maximum</code> (als Seiteneffekt) nur dann, wenn <code>summe</code> kleiner als 100 ist. Die Zuweisungsanweisung wird manchmal den falschen Wert in <code>ergebnis</code> stellen. Sie sollten den Ausdruck folgenderma&szlig;en umstellen:
</p>

<pre class="code">
int summe;
int maximum;
. . .

if ( berechneMaximum() &lt; 500 &amp;&amp; summe &lt; 100 )
{
  . . .
}
ergebnis = 2 * maximum ;
</pre>

<p>
Mit dieser Umstellung wird der Seiteneffekt <code>berechneMaximum()</code> immer ausgef&uuml;hrt. Auch wenn diese beiden <code>if</code>-Anweisungen nahezu identisch aussehen, ist die erste (wohl) ein Bug. Bugs wie dieser k&ouml;nnen schwer zu finden sein.
</p>

<p>
Die beste L&ouml;sung ist die Methode <code>berechneMaximum()</code> so zu schreiben, dass sie keinen Seiteneffekt hat. Verwenden Sie sie daher folgenderma&szlig;en:
</p>

<pre class="code">
int summe;
int maximum;
. . .
maximum = berechneMaximum();

if ( maximum &lt; 500 &amp;&amp; summe &lt; 100 )
{
  . . .
}
ergebnis = 2 * maximum ;

</pre>


        <div class="clearfloats">  <!-- divs need something inside of them --> </div>
</div> <!-- end lesson -->

<!-- QUESTION DIVISION -->
<div class="question">
<h3> FRAGE 4:</h3>
<p>
W&auml;re es sinnvoll einen <strong>Non</strong>-Short-Circuit AND-Operator
zu haben?
</p>

     <div class="navigation">
     <a href="ch40_3.html"><img src="../backIcon.gif" alt="zur vorherigen Seite"></a> &nbsp; 
     <a href="../../index.html#40"><img src="../homeIcon.gif" alt="zum Inhaltsverzeichnis"></a> &nbsp;
     <a href="ch40_5.html"><img src="../nextIcon.gif" alt="zur n&auml;chsten Seite"></a>
     </div>
</div>

</body>
</html>
